{# panel/partials/materiales_tree_node.html #}
<div class="mz-tree-node"
     data-node="{{ node.path|escape }}"
     data-folder-name="{{ node.name|default:''|escape }}"
     data-locked="{% if node.is_locked %}1{% else %}0{% endif %}">
  <div class="mz-tree-row"
       {% if is_teacher %}data-drop-folder="{{ node.path|escape }}"{% endif %}>
    <button type="button" class="mz-tree-tgl" data-toggle aria-label="Toggle">â–¸</button>

    <a class="mz-tree-folder"
       href="?tab=materiales&aud={{ audience }}&p={{ node.path|urlencode }}&mod={{ selected_mod|default:''|urlencode }}&sort={{ sort }}&view=tree">
      ğŸ“ {{ node.name }}
      {% if node.is_locked %}<span class="mz-chip-mini">MÃ³dulo</span>{% endif %}
    </a>

<span class="mz-tree-count" title="Directos / Total">
  {{ node.count_direct|default:0 }}/{{ node.count_total|default:0 }}
</span>

		{% if is_teacher %}
		  <div class="mz-tree-actions">

			<button type="button"
					class="mzc-btn ghost"
					title="Subir archivos a esta carpeta"
					data-action="folder.upload.here"
					data-parent="{{ node.path|escape }}">
			  â¬†ï¸ğŸ“
			</button>

			<button type="button"
					class="mzc-btn ghost mz-folder-add"
					title="Crear subcarpeta"
					data-action="folder.create.here"
					data-parent="{{ node.path|escape }}">
			  ğŸ“<span style="margin-left:2px">ï¼‹</span>
			</button>

			{% if not node.is_locked %}
			  <form method="post" style="margin:0" data-ajax="folder-delete" data-path="{{ node.path }}" onsubmit="return false;">
				{% csrf_token %}
				<input type="hidden" name="action" value="folder_delete">
				<input type="hidden" name="path" value="{{ node.path }}">
				<button class="mzc-btn ghost" type="submit" title="Eliminar carpeta">ğŸ—‘ï¸ğŸ“</button>
			  </form>
			{% endif %}
		  </div>
		{% endif %}
  </div>

  <div class="mz-tree-children" hidden>
    {% if node.files %}
      {% for f in node.files %}
        {% include "panel/partials/materiales_tree_file.html" with f=f %}
      {% endfor %}
    {% else %}
      <div class="mz-tree-empty">â€” sin archivos â€”</div>
    {% endif %}

    {% for child in node.children %}
      {% include "panel/partials/materiales_tree_node.html" with node=child %}
    {% endfor %}
  </div>
</div>